() {
	local ZPLUGINDIR=$XDG_CONFIG_HOME/zsh/plugins

	echo "It doesn't appear that you have your zsh plugins installed."
	echo -n "Would you like to install them [Y/n]? " 
	read response

	case "$response" in
	[Yy]* | "" )
	echo "Installing zsh plugins..."
	;;
	* )
	echo "OK, not installing for now..."
	return
	;;
	esac

	apply() {
	  mkdir -p $ZPLUGINDIR
	  local github="$1"
	  local plugin="$2"
	  local plugin_path="${ZPLUGINDIR}/${plugin}"

	  if [ ! -d "$plugin_path" ]; then
	    echo "WARNING: $plugin not found. Installing..."
	    if git clone "https://www.github.com/${github}/${plugin}" "$plugin_path"; then
	      echo "SUCCESS: $plugin installed!"
	    else
	      echo "ERROR: Failed to install $plugin"
	      return 1
	    fi
	  fi

	  if [ "$plugin" = "powerlevel10k" ]; then
	    source "$plugin_path/${plugin}.zsh-theme"
	  else
	    source "$plugin_path/${plugin}.plugin.zsh"
	  fi
	}

	apply zdharma-continuum fast-syntax-highlighting
	apply zsh-users zsh-history-substring-search
	apply zsh-users zsh-autosuggestions
	apply jeffreytse zsh-vi-mode
	apply agkozak zsh-z  
	apply romkatv powerlevel10k
}

